# 安装指南

## 环境要求

### 必需环境
- **Typecho**: 1.2.0 或更高版本
- **PHP**: 7.4 或更高版本
- **数据库**: 
  - MySQL 5.7+ / MariaDB 10.3+
  - SQLite 3.x
  - PostgreSQL 10+

### PHP扩展要求
- PDO
- mbstring
- json
- session

## 安装步骤

### 1. 下载插件
从 GitHub 下载最新版本的插件压缩包。

### 2. 解压文件
将压缩包解压到 Typecho 的插件目录：
```
/usr/plugins/BlockIPForTypecho/
```

### 3. 目录结构验证
确保目录结构如下：
```
usr/plugins/BlockIPForTypecho/
├── Plugin.php
├── README.md
├── LICENSE
├── codes/
├── assets/
├── ip2region/
└── docs/
```

### 4. 启用插件
1. 登录 Typecho 后台
2. 进入"控制台" → "插件管理"
3. 找到"BlockIPForTypecho"插件
4. 点击"启用"按钮

### 5. 自检报告
插件启用后会自动运行自检：
- ✓ 数据库表创建成功
- ✓ IP地理位置库加载正常
- ✓ 所有功能模块正常

如果出现警告或错误，请查看[故障排查](./troubleshooting.md)。

## 升级指南

### 从旧版本升级
1. 备份数据库
2. 禁用旧版本插件
3. 删除旧版本文件
4. 上传新版本文件
5. 启用新版本插件

### 数据保留
插件升级时会自动保留：
- 所有配置数据
- 黑白名单规则
- 历史日志记录

## 卸载指南

### 保留数据卸载
直接在插件管理页面点击"禁用"即可，所有数据将被保留。

### 完全卸载
如需删除所有数据：
1. 进入插件配置页面
2. 勾选"启用完整卸载"选项
3. 保存配置
4. 禁用插件

**警告：** 完整卸载将删除所有数据库表和日志记录，此操作不可恢复！

## 常见问题

### 插件启用失败
**原因：** PHP版本过低或缺少必需扩展
**解决：** 检查PHP版本和扩展，确保满足环境要求

### 数据库表创建失败
**原因：** 数据库权限不足
**解决：** 确保数据库用户有CREATE TABLE权限

### 自检报告显示错误
**原因：** 文件权限或路径问题
**解决：** 检查插件目录权限，确保PHP可读写

## 下一步

安装完成后，请查看：
- [配置指南](./configuration.md) - 了解如何配置插件
- [后台白名单使用指南](./admin-whitelist.md) - 配置后台访问控制
- [安全最佳实践](./security-best-practices.md) - 优化安全设置
